define("constants",{canvasWidth:800,canvasHeight:600,frameTime:1e3/60,gridSize:160,hexGrid:160*Math.sqrt(3),playerSize:8,playerSpeed:4,playerHealth:80,fireRate:25,meleeDamage:2,bulletSize:3,bulletSpeed:15,bulletDamage:8,zombieSize:8,zombieSpeed:3,zombieHealth:20,zombieDamage:8,spawnRate:.002,maxZombies:40,wallWidth:4,nearVal:4,hashRefresh:10}),define("keyMap",[],function(){function t(){this.arr=[!1,!1,!1,!1]}return t.prototype.arrowDown=function(t){switch(t.keyCode){case 87:case 38:this.arr[0]=!0;break;case 65:case 37:this.arr[1]=!0;break;case 83:case 40:this.arr[2]=!0;break;case 68:case 39:this.arr[3]=!0}},t.prototype.arrowUp=function(t){switch(t.keyCode){case 87:case 38:this.arr[0]=!1;break;case 65:case 37:this.arr[1]=!1;break;case 83:case 40:this.arr[2]=!1;break;case 68:case 39:this.arr[3]=!1}},t.prototype.getHorizontalDir=function(){return(this.arr[1]?1:0)+(this.arr[3]?-1:0)},t.prototype.getVerticalDir=function(){return(this.arr[0]?1:0)+(this.arr[2]?-1:0)},t}),define("geometry",[],function(){function t(){return Math.random()>.5}function e(t,e){return 0==t&&0==e?0:Math.sqrt(1/(Math.pow(t,2)+Math.pow(e,2)))}function n(t,n,i){return i*t*e(t,n)}function i(t,n,i){return i*n*e(t,n)}function r(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function o(t,e,n,i){function r(t,e,n){var i=(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y);return 0==i?0:i>0?1:2}function o(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>Math.min(t.y,n.y)}var s=r(t,e,n),a=r(t,e,i),h=r(n,i,t),u=r(n,i,e);return s!=a&&h!=u||0==s&&o(t,n,e)||0==a&&o(t,i,e)||0==h&&o(n,t,i)||0==u&&o(n,e,i)}return{flipCoin:t,normalizeX:n,normalizeY:i,distance:r,intersects:o}}),define("point",["./constants","./geometry"],function(t,e){function n(t,e){this.x=t,this.y=e}return n.prototype.copy=function(){return new n(this.x,this.y)},n.prototype.distance=function(t){return e.distance(this.x,this.y,t.x,t.y)},n.prototype.isNear=function(e,n){return n?this.distance(e)<n:this.distance(e)<t.nearVal},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.prototype.adjust=function(t,e){this.x+=t,this.y+=e},n}),define("line",["./constants","./geometry"],function(t,e){function n(t,e){this.p=t,this.q=e}return n.prototype.copy=function(){return new n(this.p.copy(),this.q.copy())},n.prototype.intersects=function(t,n){return e.intersects(t,n,this.p,this.q)},n.prototype.adjust=function(t,e){this.p.adjust(t,e),this.q.adjust(t,e)},n.prototype.collides=function(t,e){var n=t.x>this.p.x-e&&t.x<this.q.x+e||t.x>this.q.x-e&&t.x<this.p.x+e,i=t.y>this.p.y-e&&t.y<this.q.y+e||t.y>this.q.y-e&&t.y<this.p.y+e;return i&&n},n}),define("obstacle",[],function(){function t(t,e){this.edges=e,this.lines=t,this.x=0,this.y=0}return t.prototype.getCorners=function(){return this.edges.reduce(function(t,e){return t.concat(e.corners)},[])},t.prototype.adjust=function(t,e){for(var n=0;n<this.lines.length;n++)this.lines[n].adjust(t,e);for(n=0;n<this.edges.length;n++)this.edges[n].adjust(t,e);return this.x+=t,this.y+=e,this},t.prototype.copy=function(){var e=[],n=[];return this.lines.forEach(function(t,n,i){e.push(t.copy())}),this.edges.forEach(function(t,e,i){n.push(t.copy())}),new t(e,n)},t.prototype.removeDuplicateEdges=function(t){var e,n,i=!1;this.edges.forEach(function(r,o,s){t.edges.forEach(function(t,s,a){r.isNear(t)&&(e=o,n=s,i=!0)})}),i&&(this.edges.splice(e,1),t.edges.splice(n,1))},t.prototype.collides=function(t,e){return this.lines.reduce(function(n,i){return n||i.collides(t,e)},!1)},t}),define("edge",["./constants","./point","./line","./obstacle"],function(t,e,n,i){function r(n,i){e.call(this,n.x,n.y,i),this.dir=i;var r=t.zombieSize;"up"==i?this.corners=[new e(n.x+r,n.y-r),new e(n.x-r,n.y-r)]:"down"==i?this.corners=[new e(n.x+r,n.y+r),new e(n.x-r,n.y+r)]:"left"==i?this.corners=[new e(n.x-r,n.y+r),new e(n.x-r,n.y-r)]:"right"==i?this.corners=[new e(n.x+r,n.y+r),new e(n.x+r,n.y-r)]:console.log("invalid direction")}return r.prototype=Object.create(e.prototype),r.prototype.copy=function(){return new r(this,this.dir)},r.prototype.adjust=function(t,e){this.x+=t,this.y+=e;for(var n=this.corners.length;n--;)this.corners[n].adjust(t,e)},r}),define("obstacleFactory",["./constants","./point","./line","./edge","./obstacle"],function(t,e,n,i,r){function o(){var o=t.gridSize/2,s=new e(o,o),a=new e(o,0),h=new e(o,2*o),u=new e(0,o),c=new e(2*o,o),p=new e(o,o/2),d=new e(o,3*o/2),l=new e(o/2,o),f=new e(3*o/2,o),y=new e(0,0),g=new e(2*o,0),m=new e(0,2*o),w=new e(2*o,2*o),x=(new n(a,h),new n(u,c),new n(a,s)),b=new n(s,h),v=new n(u,s),z=new n(s,c),M=(new n(a,p),new n(p,s)),S=new n(s,d),j=(new n(d,h),new n(u,l),new n(l,s)),q=new n(s,f),D=(new n(f,c),new n(a,d)),I=new n(p,h),C=new n(u,f),E=new n(l,c);[new i(a,"up"),new i(d,"down")],[new i(p,"up"),new i(h,"down")],[new i(u,"left"),new i(f,"right")],[new i(l,"left"),new i(c,"right")],[new i(a,"up"),new i(l,"left"),new i(f,"right")],[new i(h,"down"),new i(l,"left"),new i(f,"right")],[new i(u,"left"),new i(p,"up"),new i(d,"down")],[new i(c,"right"),new i(p,"up"),new i(d,"down")];return allCorners=[y,g,m,w],[new r([D],[new i(a,"up"),new i(d,"down")]),new r([I],[new i(p,"up"),new i(h,"down")]),new r([C],[new i(u,"left"),new i(f,"right")]),new r([E],[new i(l,"left"),new i(c,"right")]),new r([x,j,q],[new i(a,"up"),new i(l,"left"),new i(f,"right")]),new r([b,j,q],[new i(h,"down"),new i(l,"left"),new i(f,"right")]),new r([v,M,S],[new i(u,"left"),new i(p,"up"),new i(d,"down")]),new r([z,M,S],[new i(c,"right"),new i(p,"up"),new i(d,"down")])]}function s(){this.obs=o()}return s.prototype.getRandomObs=function(t,e){var n=Math.floor(Math.random()*this.obs.length);return this.obs[n].copy().adjust(t,e)},s}),define("obstacleMap",["./constants","./geometry","./obstacleFactory"],function(t,e,n){function r(){this.arr=[],this.x=0,this.y=0,this.dx=0,this.dy=0;for(var e,n=t.canvasHeight+s,i=t.canvasWidth+s,r=0;r<n;r+=s){e=[];for(var o=0;o<i;o+=s)e.push(a.getRandomObs(o,r));this.arr.push(e)}this.removeAllDuplicateCorners()}function o(t,e){var n=t.p.x>e.x&&t.q.x>e.x||t.p.x<e.x&&t.q.x<e.x,i=t.p.y>e.y&&t.q.y>e.y||t.q.y<e.y&&t.q.y<e.y;return n&&i}var s=t.gridSize,a=new n;return r.prototype.addLeft=function(){for(var t=this.arr[0][0].x-s,e=this.arr[0][0].y,n=0;n<this.arr.length;n++)this.arr[n].unshift(a.getRandomObs(t,e)),this.arr[n].pop(),e+=s,this.removeAdjacentDuplicates(n,0)},r.prototype.addRight=function(){for(var t=this.arr[0].length,e=this.arr[0][t-1].x+s,n=this.arr[0][t-1].y,i=0;i<this.arr.length;i++)this.arr[i].push(a.getRandomObs(e,n)),this.arr[i].shift(),n+=s,this.removeAdjacentDuplicates(i,this.arr[0].length-1)},r.prototype.addTop=function(){for(var t=this.arr[0][0].x,e=this.arr[0][0].y-s,n=[],i=0;i<this.arr[0].length;i++)n.push(a.getRandomObs(t,e)),t+=s;this.arr.unshift(n),this.arr.pop();for(var i=0;i<this.arr[0].length;i++)this.removeAdjacentDuplicates(0,i)},r.prototype.addBottom=function(){for(var t=this.arr.length,e=this.arr[t-1][0].x,n=this.arr[t-1][0].y+s,i=[],r=0;r<this.arr[0].length;r++)i.push(a.getRandomObs(e,n)),e+=s;this.arr.push(i),this.arr.shift();for(var r=0;r<this.arr[0].length;r++)this.removeAdjacentDuplicates(t-1,r)},r.prototype.addWall=function(){this.x>0?(this.x-=t.gridSize,this.addLeft()):this.x<=-t.gridSize?(this.x+=t.gridSize,this.addRight()):this.y>0?(this.y-=t.gridSize,this.addTop()):this.y<=-t.gridSize&&(this.y+=t.gridSize,this.addBottom())},r.prototype.getObstacles=function(){return this.arr.reduce(function(t,e){return t.concat(e)},[])},r.prototype.getLines=function(){return this.getObstacles().reduce(function(t,e){return t.concat(e.lines.slice())},[])},r.prototype.getEdges=function(){return this.getObstacles().reduce(function(t,e){return t.concat(e.edges)},[])},r.prototype.getCorners=function(){return this.getObstacles().reduce(function(t,e){return t.concat(e.getCorners())},[])},r.prototype.removeAdjacentDuplicates=function(t,e){t>0&&this.arr[t][e].removeDuplicateEdges(this.arr[t-1][e]),t<this.arr.length-1&&this.arr[t][e].removeDuplicateEdges(this.arr[t+1][e]),e>0&&this.arr[t][e].removeDuplicateEdges(this.arr[t][e-1]),e<this.arr[t].length-1&&this.arr[t][e].removeDuplicateEdges(this.arr[t][e+1])},r.prototype.removeAllDuplicateCorners=function(){for(i=0;i<this.arr.length;i++)for(j=0;j<this.arr[0].length;j++)this.removeAdjacentDuplicates(i,j)},r.prototype.adjust=function(t,e){this.arr.forEach(function(n,i,r){n.forEach(function(n,i,r){n.adjust(t,e)})})},r.prototype.findNearestObstacle=function(t){var e=Math.floor((t.x-this.arr[0][0].x)/s),n=Math.floor((t.y-this.arr[0][0].y)/s);return e>=0&&n>=0&&e<this.arr[0].length&&n<this.arr.length?this.arr[n][e]:this.arr[0][0]},r.prototype.collides=function(t,e){return this.findNearestObstacle(t).lines.reduce(function(n,i){return n||i.collides(t,e)},!1)},r.prototype.move=function(n,i){var r=this.getCollisionDirection(i,t.playerSize),o=n.getHorizontalDir(),s=n.getVerticalDir();this.dx=e.normalizeX(o,s,t.playerSpeed),this.dy=e.normalizeY(o,s,t.playerSpeed),(r.right&&this.dx<0||r.left&&this.dx>0)&&(this.dx=0),(r.top&&this.dy>0||r.bottom&&this.dy<0)&&(this.dy=0),this.x+=this.dx,this.y+=this.dy,this.adjust(this.dx,this.dy)},r.prototype.getCollisionDirection=function(t,e){var n=this.findNearestObstacle(t);return{right:n.lines.some(function(n){return n.collides(t,e)&&n.p.x>t.x&&n.q.x>t.x&&!o(n,t)}),left:n.lines.some(function(n){return n.collides(t,e)&&n.p.x<t.x&&n.q.x<t.x&&!o(n,t)}),top:n.lines.some(function(n){return n.collides(t,e)&&n.p.y<t.y&&n.q.y<t.y&&!o(n,t)}),bottom:n.lines.some(function(n){return n.collides(t,e)&&n.p.y>t.y&&n.q.y>t.y&&!o(n,t)})}},r.prototype.lineOfSight=function(t,e){return!this.getLines().some(function(n){return n.intersects(t,e)})},r}),define("world",["./constants","./geometry"],function(t,e){function n(){this.x=0,this.y=0,this.dx=0,this.dy=0,this.copySpeed=function(t){this.dx=t.dx,this.dy=t.dy},this.move=function(){this.x+=this.dx,this.y+=this.dy,this.x>0&&(this.x-=t.gridSize),this.x<-t.gridSize&&(this.x+=t.gridSize),this.y>0&&(this.y-=t.hexGrid),this.y<-t.hexGrid&&(this.y+=t.hexGrid)}}return n}),define("livePoint",["./constants","./point"],function(t,e){function n(t,n,i,r,o,s){e.call(this,t,n),this.health=i,this.damage=r,this.dx=o,this.dy=s}return n.prototype=Object.create(e.prototype),n.prototype.hit=function(t){this.health-=t.damage},n.prototype.dead=function(){return this.health<=0},n.prototype.inSquare=function(t,e,n,i){return this.x>t&&this.x<e&&this.y>n&&this.y<i},n.prototype.move=function(){this.adjust(this.dx,this.dy)},n}),define("player",["./constants","./livePoint"],function(t,e){function n(){e.call(this,t.canvasWidth/2,t.canvasHeight/2,t.playerHealth,t.meleeDamage,0,0)}return n.prototype=Object.create(e.prototype),n}),define("Geometry",[],function(){function t(){return Math.random()>.5}function e(t,e){return 0==t&&0==e?0:Math.sqrt(1/(Math.pow(t,2)+Math.pow(e,2)))}function n(t,n,i){return i*t*e(t,n)}function i(t,n,i){return i*n*e(t,n)}function r(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function o(t,e,n,i){function r(t,e,n){var i=(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y);return 0==i?0:i>0?1:2}function o(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>Math.min(t.y,n.y)}var s=r(t,e,n),a=r(t,e,i),h=r(n,i,t),u=r(n,i,e);return s!=a&&h!=u||0==s&&o(t,n,e)||0==a&&o(t,i,e)||0==h&&o(n,t,i)||0==u&&o(n,e,i)}return{flipCoin:t,normalizeX:n,normalizeY:i,distance:r,intersects:o}}),define("bullet",["./constants","./point","./livePoint","./Geometry"],function(t,e,n,i){function r(r,o){var s=t.canvasWidth/2,a=t.canvasHeight/2,h=r-s,u=o-a;n.call(this,s,a,1,t.bulletDamage,i.normalizeX(h,u,t.bulletSpeed),i.normalizeY(h,u,t.bulletSpeed)),this.firePosition=new e(s,a)}return r.prototype=Object.create(n.prototype),r.prototype.inBounds=function(){return this.inSquare(0,t.canvasWidth,0,t.canvasHeight)},r.prototype.adjustWorld=function(t,e){this.x+=t,this.y+=e,this.firePosition.adjust(t,e)},r}),define("bulletList",["./bullet"],function(t){function e(){this.arr=[],this.shotCounter=0}return e.prototype.add=function(e,n){this.arr.push(new t(e,n))},e.prototype.move=function(t){for(var e=this.arr.length;e--;)this.arr[e].move(),this.arr[e].adjustWorld(t.dx,t.dy)},e.prototype.remove=function(t){this.arr=this.arr.filter(function(e){return!e.dead()&&e.inBounds()&&t.lineOfSight(e,e.firePosition)})},e.prototype.each=function(t){this.arr.forEach(t)},e}),define("spacialHash",["./constants"],function(t){function e(t,e){return t.includes(e)||t.push(e),t}function n(t){this.arr=[],this.length=17;for(var e=this.length;e--;)this.arr.push([]);if(t)for(var e=t.length;e--;)this.insert(t[e])}var i=t.canvasWidth/4,r=t.canvasHeight/4;return n.prototype.getIndex=function(t,e){var t=Math.floor(t/i),e=Math.floor(e/r);return t<0||t>3||e<0||e>3?this.length-1:4*e+t},n.prototype.getIndices=function(t){var n=t.getBorders(),i=[this.getIndex(n.left,n.top),this.getIndex(n.left,n.bottom),this.getIndex(n.right,n.top),this.getIndex(n.right,n.bottom)];return i.reduce(e,[])},n.prototype.insert=function(t){for(var e=this.getIndices(t),n=e.length;n--;)this.arr[e[n]].push(t)},n.prototype.getCollidingItem=function(t,e){return this.arr[this.getIndex(t.x,t.y)].find(function(n){return n.isNear(t,e)})},n.prototype.getCollidingItems=function(t,e){return this.arr[this.getIndex(t.x,t.y)].filter(function(n){return n.isNear(t,e)})},n}),define("zombie",["./constants","./livePoint","./geometry"],function(t,e,n){function i(i){e.call(this,n.flipCoin()?s-r/4:s+3*r/4,n.flipCoin()?a-o/4:a+3*o/4,t.zombieHealth,t.zombieDamage,0,0),this.speed=i,this.found=!1,this.path=[],this.counter=20}var r=t.canvasWidth,o=t.canvasHeight,s=Math.random()*r/2,a=Math.random()*o/2;return i.prototype=Object.create(e.prototype),i.prototype.inBounds=function(){return this.inSquare(-r,2*r,-o,2*o)},i.prototype.getBorders=function(){return{top:this.y-t.zombieSize,bottom:this.y+t.zombieSize,left:this.x-t.zombieSize,right:this.x+t.zombieSize}},i.prototype.adjustWorld=function(t,e){this.x+=t,this.y+=e;for(var n=this.path.length;n--;)this.path[n].x+=t,this.path[n].y+=e},i.prototype.setDirection=function(){this.path.length<=1&&this.path.push({x:r/2,y:o/2}),this.isNear(this.path[0])&&this.path.length>1&&(this.path=this.path.splice(1));var t=this.path[0].x-this.x,e=this.path[0].y-this.y;this.dx=n.normalizeX(t,e,this.speed),this.dy=n.normalizeY(t,e,this.speed)},i}),define("priorityQueue",[],function(){function t(){this.data=[]}return t.prototype.push=function(t,e){e=+e;for(var n=0;n<this.data.length&&this.data[n][1]>e;n++);this.data.splice(n,0,[t,e])},t.prototype.pop=function(){return this.data.pop()[0]},t.prototype.empty=function(){return 0==this.data.length},t.prototype.includes=function(t){return this.data.some(function(e){return e[0]==t})},t.prototype.remove=function(t){this.data=this.data.filter(function(e){return e[0]!=t})},t}),define("theta",["./geometry","./point","./priorityQueue"],function(t,e,n){return function(t,i,r){function o(t,e){return e+1.2*t.distance(i)}function s(t){if(!r.lineOfSight(t,t.p)){var e=r.getMutualNeighbors(t,t.p,d),n=t.p;0==e.length?console.log("no mutual neighbors"):n=1==e.length?e[0]:e.reduce(function(e,n){return e.g+t.distance(e)<n.g+t.distance(n)?e:n}),t.p=n,t.g=n.g+t.distance(n)}}function a(t,e){t.p.g+e.distance(t.p)<e.g&&(e.p=t.p,e.g=t.p.g+e.distance(t.p))}function h(t,e){var n=e.g;a(t,e),e.g<n&&(p.includes(e)&&p.remove(e),p.push(e,o(e,e.g)))}function u(t,n){for(var i=[];!t.isNear(n);)i.unshift(new e(n.x,n.y)),n=n.p;return i}function c(t,e){var n,i=[];for(t.g=0,t.p=t,t.p.p=t,p.push(t,o(t,0));!p.empty();){if(n=p.pop(),s(n),n.isNear(e))return u(t,n);d.push(n),i=r.getNeighbors(n);for(var a=i.length;a--;)d.includes(i[a])||(p.includes(i[a])||(i[a].g=1/0,i[a].p=null),h(n,i[a]))}return console.log("no path found"),[]}var p=new n,d=[];return r.push(t),r.push(i),c(t,i)}}),define("nodeList",["./constants","./point","./Geometry"],function(t,e,n){function i(t){var e=t.getCorners();this.arr=[],this.lines=t.getLines();for(var n=e.length;n--;)this.arr.push(e[n].copy())}return i.prototype.lineOfSight=function(t,e){return!this.lines.some(function(i){return n.intersects(t,e,i.p,i.q)})},i.prototype.hasNeighbors=function(t){return!!t.neighbors},i.prototype.setNeighbors=function(t){var e=this;t.neighbors=this.arr.filter(function(n){return e.lineOfSight(t,n)&&!t.equals(n)})},i.prototype.getNeighbors=function(t){return this.hasNeighbors(t)||this.setNeighbors(t),t.neighbors},i.prototype.getMutualNeighbors=function(t,e,n){return nghbrs1=this.getNeighbors(t),nghbrs2=this.getNeighbors(e),nghbrs1.filter(function(t){return nghbrs2.includes(t)&&n.includes(t)})},i.prototype.push=function(t){this.arr.push(t)},i}),define("zombieList",["./constants","./spacialHash","./zombie","./theta","./point","./nodeList"],function(t,e,n,i,r,o){function s(){this.arr=[],this.hash=new e,this.timer=0}return s.prototype.getRandomSpeed=function(){var e=Math.random()*Math.log(this.timer/100);return e<1&&(e=1),e>t.zombieSpeed&&(e=t.zombieSpeed),e},s.prototype.add=function(){Math.random()<Math.log(this.timer)*t.spawnRate&&this.arr.length<t.maxZombies&&this.arr.push(new n(this.getRandomSpeed())),this.timer++},s.prototype.getPath=function(e,n){return i(new r(e.x,e.y),new r(t.canvasWidth/2,t.canvasHeight/2),n)},s.prototype.update=function(t,e){for(var n=0,i=new o(e),r=this.arr.length;r--;){var s=this.arr[r];s.path.length<4&&s.counter>20&&(s.path=this.getPath(s,i),s.counter=0),s.counter++,s.setDirection(s),s.adjustWorld(t.dx,t.dy),s.move(),s.dead()&&n++}return n},s.prototype.remove=function(){this.arr=this.arr.filter(function(t){return!t.dead()&&t.inBounds()})},s.prototype.updateHash=function(){this.timer%t.hashRefresh==0&&(this.hash=new e(this.arr))},s.prototype.collide=function(t,e){this.hash.getCollidingItems(t,e).forEach(function(e){e.hit(t),t.hit(e)})},s}),define("updater",["./constants","./zombie"],function(t,e){function n(t,e){t.copySpeed(e),t.move()}function i(t,e,n){t.move(e,n),t.addWall()}function r(e,n,i,r,o){return e.updateHash(),e.add(),s=e.update(n,i),e.remove(),r.arr.forEach(function(n){e.collide(n,t.zombieSize+t.bulletSize)}),e.collide(o,t.zombieSize+t.playerSize),e}function o(t,e,n){return t.move(n),t.remove(e),t}var s=0;return function(t){return document.getElementById("score").innerHTML="Score: "+t.score,document.getElementById("health").innerHTML="Health: "+t.player.health,t.zombies=r(t.zombies,t.worldMovement,t.obsMap,t.bullets,t.player),t.bullets=o(t.bullets,t.obsMap,t.worldMovement),n(t.worldMovement,t.obsMap),i(t.obsMap,t.keyMap,t.player),t.shotCounter--,t.score+=s,!t.player.dead()}}),define("renderer",["./constants"],function(t){function e(e){a.beginPath(),a.arc(e.x,e.y,t.playerSize,0,2*Math.PI),a.fill()}function n(e){e.each(function(e,n,i){a.beginPath(),a.arc(e.x,e.y,t.bulletSize,0,2*Math.PI),a.fill()})}function i(e){e.arr.forEach(function(e,n,i){a.beginPath(),a.arc(e.x,e.y,t.zombieSize,0,2*Math.PI),a.fillStyle="#105F10",a.fill(),a.fillStyle="#000000"})}function r(t){a.beginPath(),a.drawImage(h,t.x,t.y),a.closePath()}function o(e){e.getLines().forEach(function(e,n,i){a.beginPath(),a.lineWidth=t.wallWidth,a.moveTo(e.p.x,e.p.y),a.lineTo(e.q.x,e.q.y),a.stroke(),a.lineWidth=1})}var s=document.getElementById("gameStage"),a=s.getContext("2d"),h=new Image;return h.src="resources/hex_bg.png",function(s){a.clearRect(0,0,t.canvasWidth,t.canvasHeight),r(s.worldMovement),i(s.zombies),n(s.bullets),e(s.player),o(s.obsMap)}}),define("game",["./keyMap","./obstacleMap","./world","./player","./bulletList","./zombieList","./updater","./renderer"],function(t,e,n,i,r,o,s,a){var h={keyMap:new t,player:new i,bullets:new r,zombies:new o,worldMovement:new n,obsMap:new e,shotCounter:0,score:0};return{arrowDown:function(t){h.keyMap.arrowDown(t)},arrowUp:function(t){h.keyMap.arrowUp(t)},mouseClick:function(t){var e=document.getElementById("gameStage");if(h.shotCounter<1){var n=t.pageX-e.getBoundingClientRect().left,i=t.pageY-e.getBoundingClientRect().top;h.bullets.add(n,i)}},update:function(){return s(h)},render:function(){a(h)}}}),requirejs.config({baseUrl:"scripts"}),requirejs(["constants","game"],function(t,e){function n(){function i(){o.update()||(clearInterval(r),n()),o.render()}var r,o=e;document.getElementById("doc").onkeydown=o.arrowDown,document.getElementById("doc").onkeyup=o.arrowUp,document.getElementById("doc").onclick=o.mouseClick,document.getElementById("start").onclick=function(){clearInterval(r),r=setInterval(i,t.frameTime)}}n()}),define("main",function(){});